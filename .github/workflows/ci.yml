name: CI (Linting and Tests)  
on:  
  push:  
    branches: [ "main", "dev" ]  
  pull_request:  
    branches: [ "main" ]  

jobs:  
  lint-and-test:  
    runs-on: ubuntu-latest  
    steps:  
      - uses: actions/checkout@v4  
      - name: Set up Python  
        uses: actions/setup-python@v4  
        with:  
          python-version: "3.10"  
      - name: Install dependencies  
        run: pip install -r requirements.txt  
      - name: Run flake8  
        run: flake8 .  
      - name: Check Black formatting  
        run: black --check .  
      - name: Run Django tests  
        run: python manage.py test  